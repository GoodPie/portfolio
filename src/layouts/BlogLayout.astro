---
import BaseLayout from "./BaseLayout.astro";
import ArrowLeftIcon from "@/components/icons/ArrowLeftIcon.astro";
import Tag from "@/components/Tag.astro";
import { formatDate } from "@/lib/utils";

interface Props {
  title: string;
  description: string;
  publishDate: string;
  tags?: string[];
}

const { title, description, publishDate, tags = [] } = Astro.props;
---

<BaseLayout title={`${title} | Brandyn Britton`} description={description}>
  <article class="py-16 md:py-24">
    <a
      href="/blog"
      class="inline-flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors mb-8"
    >
      <ArrowLeftIcon />
      Back to blog
    </a>

    <header class="mb-12">
      <time class="text-sm text-muted-foreground">{formatDate(publishDate)}</time>
      <h1 class="text-4xl md:text-5xl font-serif font-medium mt-2 mb-4">
        {title}
      </h1>
      <p class="text-lg text-muted-foreground">{description}</p>

      {
        tags.length > 0 && (
          <div class="flex flex-wrap gap-2 mt-6">
            {tags.map((tag) => (
              <Tag>{tag}</Tag>
            ))}
          </div>
        )
      }
    </header>

    <div
      class="prose prose-invert prose-lg max-w-none
             prose-headings:font-serif prose-headings:font-medium
             prose-h2:text-2xl prose-h2:mt-12 prose-h2:mb-4
             prose-h3:text-xl prose-h3:mt-8 prose-h3:mb-3
             prose-p:text-muted-foreground prose-p:leading-relaxed
             prose-a:text-primary prose-a:no-underline hover:prose-a:underline
             prose-strong:text-foreground prose-strong:font-semibold
             prose-code:text-primary prose-code:bg-secondary prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-code:before:content-none prose-code:after:content-none
             prose-pre:bg-card prose-pre:border prose-pre:border-border
             prose-blockquote:border-l-primary prose-blockquote:text-muted-foreground prose-blockquote:italic
             prose-li:text-muted-foreground
             prose-img:rounded-lg"
    >
      <slot />
    </div>

    <footer class="mt-16 pt-8 border-t border-border">
      <a
        href="/"
        class="inline-flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors"
      >
        <ArrowLeftIcon />
        Back to home
      </a>
    </footer>
  </article>
</BaseLayout>
